{"title":"获取鼠标坐标","uid":"c4abc1f7c07ba8755886e0ee07810a15","slug":"Webots/Application/mouse/获取鼠标坐标","date":"2022-01-30T12:49:36.000Z","updated":"2022-02-09T13:27:47.435Z","comments":true,"path":"api/articles/Webots/Application/mouse/获取鼠标坐标.json","keywords":null,"cover":"https://s2.loli.net/2022/02/09/pEWnXPfzC2uiLQN.jpg","content":"<h1 id=\"1-鼠标检测原理\"><a href=\"#1-鼠标检测原理\" class=\"headerlink\" title=\"1.鼠标检测原理\"></a><strong>1.鼠标检测原理</strong></h1><h2 id=\"1-1-鼠标检测范围\"><a href=\"#1-1-鼠标检测范围\" class=\"headerlink\" title=\"1.1.鼠标检测范围\"></a>1.1.鼠标检测范围</h2><p>鼠标检测只能检测仿真框里鼠标的移动和点击，超出去了就会返回nan。而且中途把框拉大也没用，超过原来大小还是会显示nan，只能通过重启仿真来重新检测。</p>\n<p><img src=\"/post/Webots/Application/mouse/%E8%8E%B7%E5%8F%96%E9%BC%A0%E6%A0%87%E5%9D%90%E6%A0%87/Untitled.png\" alt=\"Untitled.png\"></p>\n<p>框的检测是以整个框的左上角为 （0,0）点， 右下角为 （1,1），例如想模仿步兵的第一人称视角，可以用这次的坐标点减去上次的坐标点，算出的变化率作为云台的增量。 </p>\n<h2 id=\"1-2-鼠标检测应用范围\"><a href=\"#1-2-鼠标检测应用范围\" class=\"headerlink\" title=\"1.2.鼠标检测应用范围\"></a>1.2.鼠标检测应用范围</h2><p>默认开启的是检测鼠标左键，中键，右键点击，X，Y坐标。</p>\n<p>官方文档里说的可以开启检测 3D 的坐标，但是这样会影响仿真的速度，所以一般不开，而且也用不上。后面就不讲述了。</p>\n<h1 id=\"2-鼠标检测应用\"><a href=\"#2-鼠标检测应用\" class=\"headerlink\" title=\"2.鼠标检测应用\"></a><strong>2.鼠标检测应用</strong></h1><h2 id=\"2-1-使能鼠标检测\"><a href=\"#2-1-使能鼠标检测\" class=\"headerlink\" title=\"2.1.使能鼠标检测\"></a>2.1.使能鼠标检测</h2><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">#include &lt;webots&#x2F;mouse.h&gt;\n\nwb_mouse_enable(TIME_STEP);</code></pre>\n\n<h2 id=\"2-2-获取鼠标\"><a href=\"#2-2-获取鼠标\" class=\"headerlink\" title=\"2.2.获取鼠标\"></a>2.2.获取鼠标</h2><p>通过 wb_mouse_get_state 函数返回当前鼠标结构体，在 while(1) 里不断执行，把鼠标的状态打印出来。</p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">WbMouseState Mouse1 &#x3D; wb_mouse_get_state();\n\n&#x2F;&#x2F;获取鼠标左键\nprintf(&quot;mouse.left &#x3D; %d:\\n&quot;, Mouse1.left);\n&#x2F;&#x2F;获取鼠标中键\nprintf(&quot;mouse.middle &#x3D; %d:\\n&quot;, Mouse1.middle);\n&#x2F;&#x2F;获取鼠标右键\nprintf(&quot;mouse.right &#x3D; %d:\\n&quot;, Mouse1.right);\n&#x2F;&#x2F;获取鼠标左右平移\nprintf(&quot;mouse.u &#x3D; %lf:\\n&quot;, Mouse1.u);\n&#x2F;&#x2F;获取鼠标上下平移\nprintf(&quot;mouse.v &#x3D; %lf:\\n&quot;, Mouse1.v);</code></pre>\n\n<h1 id=\"参考与致谢\"><a href=\"#参考与致谢\" class=\"headerlink\" title=\"参考与致谢\"></a><strong>参考与致谢</strong></h1><p><a href=\"https://cyberbotics.com/doc/reference/mouse#wb_mouse_enable\">Webots: 鼠标</a></p>\n","text":"1.鼠标检测原理1.1.鼠标检测范围鼠标检测只能检测仿真框里鼠标的移动和点击，超出去了就会返回nan。而且中途把框拉大也没用，超过原来大小还是会显示nan，只能通过重启仿真来重新检测。 框的检测是以整个框的左上角为 （0,0）点， 右下角为 （1,1），例如想模仿步兵的第一人称视...","link":"","photos":[],"count_time":{"symbolsCount":882,"symbolsTime":"1 mins."},"categories":[{"name":"运动仿真","slug":"运动仿真","count":19,"path":"api/categories/运动仿真.json"}],"tags":[{"name":"Webots","slug":"Webots","count":19,"path":"api/tags/Webots.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1-%E9%BC%A0%E6%A0%87%E6%A3%80%E6%B5%8B%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">1.鼠标检测原理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-1-%E9%BC%A0%E6%A0%87%E6%A3%80%E6%B5%8B%E8%8C%83%E5%9B%B4\"><span class=\"toc-text\">1.1.鼠标检测范围</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-2-%E9%BC%A0%E6%A0%87%E6%A3%80%E6%B5%8B%E5%BA%94%E7%94%A8%E8%8C%83%E5%9B%B4\"><span class=\"toc-text\">1.2.鼠标检测应用范围</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#2-%E9%BC%A0%E6%A0%87%E6%A3%80%E6%B5%8B%E5%BA%94%E7%94%A8\"><span class=\"toc-text\">2.鼠标检测应用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-1-%E4%BD%BF%E8%83%BD%E9%BC%A0%E6%A0%87%E6%A3%80%E6%B5%8B\"><span class=\"toc-text\">2.1.使能鼠标检测</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-2-%E8%8E%B7%E5%8F%96%E9%BC%A0%E6%A0%87\"><span class=\"toc-text\">2.2.获取鼠标</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E4%B8%8E%E8%87%B4%E8%B0%A2\"><span class=\"toc-text\">参考与致谢</span></a></li></ol>","author":{"name":"Miraggio","slug":"blog-author","avatar":"https://s2.loli.net/2022/01/23/kntF9TEBOyHquwV.png","link":"https://lapzjfit.site","description":"喜欢研究奇奇怪怪的技术&游戏宅","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"创建三全向轮小车","uid":"86336032c6ac02563b9014b8bacea503","slug":"Webots/Application/omni wheel/创建三全向轮小车","date":"2022-01-30T12:49:36.000Z","updated":"2022-02-08T16:30:33.688Z","comments":true,"path":"api/articles/Webots/Application/omni wheel/创建三全向轮小车.json","keywords":null,"cover":"https://s2.loli.net/2022/02/08/uk4st92T1lxBzEf.jpg","text":"官方有开源的全向轮模型，可以先尝试自己建立 下面我会讲我的思路，默认添加物理属性和碰撞属性。 1.搭建躯干我们先创建一个 Robot 节点，在 children 里面先建立一个 Transform 节点。这样可以使小车躯干在 Robot（父级）坐标下进行移动。 我在 Transf...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"运动仿真","slug":"运动仿真","count":19,"path":"api/categories/运动仿真.json"}],"tags":[{"name":"Webots","slug":"Webots","count":19,"path":"api/tags/Webots.json"}],"author":{"name":"Miraggio","slug":"blog-author","avatar":"https://s2.loli.net/2022/01/23/kntF9TEBOyHquwV.png","link":"https://lapzjfit.site","description":"喜欢研究奇奇怪怪的技术&游戏宅","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"复合固体与物理属性","uid":"8ccb81c699797060f7237a0cd838fd05","slug":"Webots/Basis/Compound Solid/Compound Solid","date":"2022-01-30T12:49:36.000Z","updated":"2022-02-08T16:30:33.720Z","comments":true,"path":"api/articles/Webots/Basis/Compound Solid/Compound Solid.json","keywords":null,"cover":"https://s2.loli.net/2022/02/08/NapMbPhukLZzOqe.jpg","text":"1. 复合固件官方给的关系图如下 1.1. 创建固体哑铃（复合固体）创建如下： 先在主界面创建一个solid，在children里创建一个Group Group→children里创建shape→Cylinder 继续在Group→children里创建Transform→chi...","link":"","photos":[],"count_time":{"symbolsCount":376,"symbolsTime":"1 mins."},"categories":[{"name":"运动仿真","slug":"运动仿真","count":19,"path":"api/categories/运动仿真.json"}],"tags":[{"name":"Webots","slug":"Webots","count":19,"path":"api/tags/Webots.json"}],"author":{"name":"Miraggio","slug":"blog-author","avatar":"https://s2.loli.net/2022/01/23/kntF9TEBOyHquwV.png","link":"https://lapzjfit.site","description":"喜欢研究奇奇怪怪的技术&游戏宅","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}